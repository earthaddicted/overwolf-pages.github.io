"use strict";var searchParams=new URLSearchParams(window.location.search),jobUID=searchParams.get("uid"),comeetToken="1B16C4BD7005131B1A26F391B1",comeetID="B1.001",jobDetailsUrl="https://www.comeet.co/careers-api/2.0/company/".concat(comeetID,"/positions/").concat(jobUID,"?token=").concat(comeetToken,"&details=true");function fetchJobDetails(){fetch(jobDetailsUrl).then((function(e){e.ok&&e.json().then((function(e){return insertJobDetails(e)}))}))}function insertJobDetails(e){if(jobUID){var t=document.getElementById("job-title"),n=document.getElementById("job-info"),o=document.getElementById("job-details"),c=document.getElementById("mailto"),a="";t.innerHTML=e.name,n.innerHTML=getJobInfoTemplate(e),e.details.forEach((function(e){e.value?(e.value=e.value.replace(/(<p><br><\/p>)+/g,""),a+="<h3>".concat(e.name,"</h3> ").concat(e.value)):a=""})),o.innerHTML=a,c.href="mailto:".concat(e.email),c.innerText=e.email}else window.location.replace("/career_template.html")}function getJobInfoTemplate(e){var t="";e.location&&"IL"===e.location.country&&(t="Israel");var n=e.location?e.location.city:"",o=n||t?'<span class="jobs__location">'.concat(n,", ").concat(t,"</span>"):"";return e.employment_type=e.employment_type?e.employment_type:"Full-time",e.experience_level=e.experience_level?'<span class="jobs__level">'.concat(e.experience_level,"</span>"):"","\n                    ".concat(o,'\n                    <span class="jobs__type">\n                        ').concat(e.employment_type,"\n                    </span>\n                     ").concat(e.experience_level)}fetchJobDetails(),window.OW=window.OW||{},OW.careers={filesAllowed:[".pdf",".doc",".docx"],initForm:function(){var e=this,t=document.getElementById("apply-form");t&&(document.querySelectorAll(".error").forEach((function(e){e.addEventListener("click",(function(e){e.target.innerText=""}))})),t.addEventListener("submit",(function(n){return n.preventDefault(),e.checkForFile(t)&&e.formSend(t),!1})),this.initFileUpload())},formSend:function(e){var t=this,n="https://www.comeet.co/careers-api/1.0/company/B1.001/positions/".concat(jobUID,"/apply?token=1B16C4BD7005131B1A26F391B1");return document.getElementById("apply-form-error").innerText="",fetch(n,{body:new FormData(e),cache:"no-cache",method:"POST"}).then((function(e){e.ok?t.onFormSuccess():e.json().then((function(e){return t.onFormError(e.message)}))})),!1},onFormSuccess:function(){document.getElementById("apply-form").style.display="none",document.getElementById("form-success").style.display="flex"},onFormError:function(e){document.getElementById("apply-form-error").innerText=e},checkForFile:function(){var e=document.getElementById("file-upload"),t=document.getElementById("upload-error"),n=document.getElementById("upload-input");return!(!n.files||!n.files[0])||(e.classList.add("empty"),t.innerText="Please add a file",t.classList.add("show"),window.setTimeout((function(){t.classList.remove("show")}),3e3),n.focus(),!1)},initFileUpload:function(){var e=this,t=document.getElementById("file-upload"),n=document.getElementById("upload-error"),o=document.getElementById("file-target"),c=document.getElementById("file-name"),a=document.getElementById("remove-file"),i=document.getElementById("upload-input");i.addEventListener("change",(function(){if(!(i&&i.files&&i.files[0]))return!1;for(var a=i.files[0].name,s=!1,l=0;l<e.filesAllowed.length;l++)a.indexOf(e.filesAllowed[l])>-1&&(s=!0);return n.classList.remove("show"),o.classList.remove("active"),s?(c.innerText=a,t.classList.remove("empty")):(t.classList.add("empty"),i.val(""),n.innerText="Unsupported format",n.classList.add("show"),window.setTimeout((function(){n.classList.remove("show")}),3e3)),!1})),a.addEventListener("click",(function(){n.classList.remove("show"),c.innerText="",o.classList.remove("active"),t.classList.add("empty"),i.val("")})),o.addEventListener("dragenter",(function(){o.classList.add("active")})),o.addEventListener("dragover",(function(){o.classList.add("active")})),o.addEventListener("blur",(function(){o.classList.remove("active")})),o.addEventListener("dragleave",(function(){o.classList.remove("active")})),i.addEventListener("focus",(function(){o.classList.add("active")})),i.addEventListener("blur",(function(){o.classList.remove("active")}))}},OW.careers.initForm();